(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(21),c=a(57),o=a(0),r=a.n(o),i=a(8),l=a.n(i),s=(a(85),a(14)),d=a(41),f=a(6),u=a.n(f),p=function(e){return"https://api.airtable.com/v0/appfS3glFVXDszRVn/".concat(e,"?api_key=").concat("keyFRBqnIvAd1gkXG")},b={headerText:"EIC Consultants",colors:{primary:"#edeac9",secondary:"#f5f4dc",outline:"#6d2e00bd"}},m=function(e){return e*Math.PI/180},g=function(e){return e*(Math.random()-.5)},h=m(13),v=2*Math.PI/7,E=m(10),y=function(e){var t=h;t+=g(E),t+=e*v;var a=g(17*.05)+10*Math.sin(t)-7*Math.cos(t)/2,n=g(17*.05)-10*Math.cos(t)-7*Math.sin(t)/2,c=180*t/Math.PI;return"translate(".concat(a,", ").concat(n,") rotate(").concat(c,")")},O=u.a.uniq(["#63b598","#ce7d78","#ea9e70","#a48a9e","#c6e1e8","#648177","#0d5ac1","#f205e6","#1c0365","#14a9ad","#4ca2f9","#a4e43f","#d298e2","#6119d0","#d2737d","#c0a43c","#f2510e","#79806e","#cd2f00","#9348af","#01ac53","#c5a4fb","#996635","#b11573","#75d89e","#2f3f94","#2f7b99","#da967d","#34891f","#b0d87b","#ca4751","#7e50a8","#c4d647","#e0eeb8","#11dec1","#566ca0","#ffdbe1","#935b6d","#916988","#aead3a","#9e6d71","#4b5bdc","#0cd36d","#250662","#cb5bea","#ac3e1b","#df514a","#539397","#880977","#f697c1","#ba96ce","#679c9d","#c6c42c","#5d2c52","#48b41b","#e1cf3b","#5be4f0","#57c4d8","#a4d17a","#be608b","#96b00c","#088baf","#f158bf","#e145ba","#ee91e3","#05d371","#5426e0","#4834d0","#802234","#6749e8","#0971f0","#8fb413","#b2b4f0","#c3c89d","#c9a941","#41d158","#fb21a3","#51aed9","#5bb32d","#21538e","#89d534","#d36647","#7fb411","#0023b8","#3b8c2a","#986b53","#f50422","#983f7a","#ea24a3","#79352c","#521250","#c79ed2","#d6dd92","#e33e52","#b2be57","#fa06ec","#1bb699","#6b2e5f","#64820f","#21538e","#89d534","#d36647","#7fb411","#0023b8","#3b8c2a","#986b53","#f50422","#983f7a","#ea24a3","#79352c","#521250","#c79ed2","#d6dd92","#e33e52","#b2be57","#fa06ec","#1bb699","#6b2e5f","#64820f","#9cb64a","#996c48","#9ab9b7","#06e052","#e3a481","#0eb621","#fc458e","#b2db15","#aa226d","#792ed8","#73872a","#520d3a","#cefcb8","#a5b3d9","#7d1d85","#c4fd57","#f1ae16","#8fe22a","#ef6e3c","#243eeb","#dd93fd","#3f8473","#e7dbce","#421f79","#7a3d93","#635f6d","#93f2d7","#9b5c2a","#15b9ee","#0f5997","#409188","#911e20","#1350ce","#10e5b1","#fff4d7","#cb2582","#ce00be","#32d5d6","#608572","#c79bc2","#00f87c","#77772a","#6995ba","#fc6b57","#f07815","#8fd883","#060e27","#96e591","#21d52e","#d00043","#b47162","#1ec227","#4f0f6f","#1d1d58","#947002","#bde052","#e08c56","#28fcfd","#36486a","#d02e29","#1ae6db","#3e464c","#a84a8f","#911e7e","#3f16d9","#0f525f","#ac7c0a","#b4c086","#c9d730","#30cc49","#3d6751","#fb4c03","#640fc1","#62c03e","#d3493a","#88aa0b","#406df9","#615af0","#2a3434","#4a543f","#79bca0","#a8b8d4","#00efd4","#7ad236","#7260d8","#1deaa7","#06f43a","#823c59","#e3d94c","#dc1c06","#f53b2a","#b46238","#2dfff6","#a82b89","#1a8011","#436a9f","#1a806a","#4cf09d","#c188a2","#67eb4b","#b308d3","#fc7e41","#af3101","#71b1f4","#a2f8a5","#e23dd0","#d3486d","#00f7f9","#474893","#3cec35","#1c65cb","#5d1d0c","#2d7d2a","#ff3420","#5cdd87","#a259a4","#e4ac44","#1bede6","#8798a4","#d7790f","#b2c24f","#de73c2","#d70a9c","#88e9b8","#c2b0e2","#86e98f","#ae90e2","#1a806b","#436a9e","#0ec0ff","#f812b3","#b17fc9","#8d6c2f","#d3277a","#2ca1ae","#9685eb","#8a96c6","#dba2e6","#76fc1b","#608fa4","#20f6ba","#07d7f6","#dce77a","#77ecca"]),k=a(136),M=a(138),j=a(110),C=a(4),N=Object(k.a)(function(e){return{dismissed:{},dragHint:{background:"#f5f3ec",position:"absolute","& .MuiTypography-body1":{},top:e.spacing(4),left:e.spacing(4),padding:e.spacing(2),boxShadow:e.shadows[3],textAlign:"center","&$dismissed":{left:-400,transition:"left 1000ms"}},root:{zIndex:-1,position:"absolute",height:"100vh",width:"100vw","& svg > g > rect":{fill:"#eef3f9"},"& *":{outline:"none"}}}}),S=function(e){var t=e.allMembers,a=e.selectedCountries,c=e.visibleMemberMap,i=e.setTooltipContent,l=e.setSelectedMember;console.log("allMembers: ",t);var f=b,p=(f.headerText,f.colors),m=Object(o.useMemo)(function(){return t.reduce(function(e,t,a){var n=t.name,c=t.latitude,o=t.longitude,s=t.col_rotation,f=void 0===s?0:s;return a||console.log("RUNNING MEMOIZED MEMBER CREATION"),e[t.index]=r.a.createElement(d.Marker,{key:n,coordinates:[o,c],onClick:l.bind(null,t),onMouseEnter:function(e){i(n)},onMouseLeave:function(){i("")}},r.a.createElement("g",{transform:y(f)},r.a.createElement("rect",{ry:".5",x:2.9,y:3.5,width:1.2,height:6.5,fill:"url(#shaft-reflection)",className:"pin-shaft",strokeWidth:"0",strokeOpacity:"0"}),r.a.createElement("circle",{cx:3.5,cy:3.5,r:3.5,className:"pin-head",stroke:"#555",strokeOpacity:1,strokeWidth:0,fill:O[a%(O.length-1)],fillOpacity:1}),r.a.createElement("circle",{cx:3.5,cy:3.5,r:3.5,className:"pin-head-grad",stroke:"transparent",fill:"url(#head-reflection)",fillOpacity:.3}))),e},{})},[t,i]),g=u.a.chain(c).map(function(e,t){return t}).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return m[e]}).value(),h=N(),v=Object(o.useState)(!1),E=Object(n.a)(v,2),k=E[0],S=E[1],x=function(){return S(!0)};return r.a.createElement("div",{className:h.root},r.a.createElement(M.a,{className:Object(C.a)(h.dragHint,Object(s.a)({},h.dismissed,k))},r.a.createElement(j.a,{variant:"body1"},"Drag map to move"),r.a.createElement(j.a,{variant:"body1"},"Scroll to zoom")),r.a.createElement(d.ComposableMap,{"data-tip":"",onMouseOver:function(){return setTimeout(x,2e4)},onClick:x,onWheel:x,onDragStart:x},r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:"head-reflection",cx:"46%",cy:"60%",r:"50%",fx:"46%",fy:"60%"},r.a.createElement("stop",{offset:"0%",stopOpacity:"0",stopColor:"#fff"}),r.a.createElement("stop",{offset:"100%",stopOpacity:"1",stopColor:"#000"})),r.a.createElement("linearGradient",{id:"shaft-reflection",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",stopOpacity:"1",stopColor:"#777"}),r.a.createElement("stop",{offset:"46%",stopOpacity:"1",stopColor:"#fcfcfc"}),r.a.createElement("stop",{offset:"100%",stopOpacity:"1",stopColor:"#777"}))),r.a.createElement(d.ZoomableGroup,{"data-tip":"",zoom:1,center:[19,0]},r.a.createElement(d.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},function(e){return e.geographies.map(function(e){return r.a.createElement(d.Geography,{fill:a.includes(e.properties.NAME)?p.primary:p.secondary,stroke:p.outline,strokeWidth:".1",key:e.rsmKey,geography:e,onClick:x,onMouseEnter:function(t){i(e.properties.NAME)},onMouseLeave:function(e){i("")}})})}),g)))},x=a(69),w=a(139),T=a(144),A=a(146),L=Object(k.a)(function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",maxWidth:500,maxHeight:"85vh",overflowY:"auto",backgroundColor:"#e8f2ff",border:"1px solid #000",boxShadow:e.shadows[5],padding:e.spacing(3,4),margin:e.spacing(2)},introDetails:{display:"inline-block",minWidth:"220px"},bodyDetails:{paddingBottom:e.spacing(2)},name:{fontSize:"1.5rem",fontVariant:"petite-caps",letterSpacing:"0.8px",verticalAlign:"top",textAlign:"unset",display:"inline-block",borderBottom:"2px solid #0858c0",marginBottom:e.spacing(2)},detailTitle:{fontSize:".6rem",letterSpacing:"1.6px",lineHeight:1.5,fontFamily:"monospace",textTransform:"uppercase",paddingTop:e.spacing(1)},detailValue:{fontSize:".75rem",display:"inline"},selectedAttribute:{fontWeight:"700"},profileLink:{fontSize:".75rem",fontFamily:"monospace",display:"inline-block",paddingBottom:e.spacing(3),color:"#0858c0"},headshot:{maxWidth:"75px",marginLeft:e.spacing(2),verticalAlign:"top"}}}),_=[{key:"membership",title:"Membership"},{key:"consulting_status",title:"Consulting Status"},{key:"location_&_timezone",title:"Location & Timezone"},{key:"educational_background",title:"Educational Background"}],B=function(e){var t=e.selectedMember,a=e.unselectMemberHandler,n=e.selectedOptionsMap,c=e.MULTI_SELECT_CONFIG,o=L();if(!t)return null;u.a.get(t,"profile_pic.0.url");var i=u.a.get(t,"online_profile_link"),l=r.a.createElement("div",{className:o.paper},r.a.createElement("div",{className:o.introDetails},r.a.createElement(j.a,{className:o.name,variant:"h2"},t.name),_.map(function(e){var a=e.key,n=e.title;return e.link,r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:o.detailTitle,variant:"subtitle1"},n),r.a.createElement(j.a,{className:o.detailValue,variant:"body1"},u.a.get(t,a,"N/A")))})),r.a.createElement("div",{className:o.bodyDetails},c.map(function(e){var a=e.key,c=e.title,i=e.nameMap;return r.a.createElement("div",{key:a},r.a.createElement(j.a,{className:o.detailTitle,variant:"subtitle1"},c),function(e,a){var c=u.a.get(t,e,[]);if(!c.length)return r.a.createElement(j.a,{className:o.detailValue,variant:"body1"},"N/A");var i=u.a.chain(c).map(function(t){return{value:t,label:u.a.get(a,t),selected:u.a.some(n[e],function(e){return e.value===t})}}).sort(function(e,t){return e.label.toLowerCase()>t.label.toLowerCase()}).value();return r.a.createElement(r.a.Fragment,null,i.map(function(e,t){var a=e.label,n=e.selected,i=Object(C.a)(o.detailValue,Object(s.a)({},o.selectedAttribute,n));return r.a.createElement(j.a,{className:i,variant:"body1"},a,t!==c.length-1?", ":"")}))}(a,i))})),i&&r.a.createElement(w.a,{className:o.profileLink,href:i,rel:"noreferrer",target:"_blank"},i));return r.a.createElement(T.a,{className:o.modal,open:!0,onClose:a,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",BackdropComponent:A.a,BackdropProps:{timeout:500}},l)},z=a(145),I=a(147),F=a(140),D=a(61),H=a(141),G=Object(k.a)(function(e){var t;return{paper:(t={width:"100vw",height:"75vw",backgroundColor:"#e6e3d7",boxShadow:e.shadows[5]},Object(s.a)(t,e.breakpoints.up(500),{width:"254px"}),Object(s.a)(t,e.breakpoints.up("sm"),{width:"300px"}),Object(s.a)(t,e.breakpoints.up("md"),{width:"360px","& $content":{padding:e.spacing(3,4)}}),Object(s.a)(t,e.breakpoints.up("lg"),{width:"420px"}),Object(s.a)(t,e.breakpoints.up("xl"),{width:"480px"}),t),content:{overflowY:"auto",height:"100%",width:"100%",padding:e.spacing(2),boxSizing:"border-box"},header:{fontSize:".75rem",lineHeight:1.25,paddingRight:e.spacing(4),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},multiSelect:{fontSize:".75rem",paddingBottom:e.spacing(1)},detailTitle:{fontSize:".6rem",letterSpacing:"1.6px",lineHeight:1.5,fontFamily:"monospace",textTransform:"uppercase"},toggleButton:{position:"absolute",top:e.spacing(1),right:e.spacing(1)}}}),P=function(e){var t=e.multiSelectConfig,a=e.handleSelectOptions,n=e.handleSelectCountries,c=(e.selectedOptionsMap,e.togglePanelOpen),o=e.panelOpen,i=e.countries,l=G();return r.a.createElement(z.a,{classes:{paper:[l.paper]},open:o,variant:"persistent",anchor:"right"},r.a.createElement(I.a,{className:l.toggleButton,onClick:c},r.a.createElement(F.a,{onClick:c},r.a.createElement(H.a,null))),r.a.createElement("div",{className:l.content},r.a.createElement(j.a,{className:l.header,variant:"body1"},"Filter to members who fit ",r.a.createElement("em",null,"all")," of the following criteria"),t.map(function(e){var t=e.title,n=e.options,c=e.key;return r.a.createElement("div",{key:c,className:l.selectWrapper},r.a.createElement(j.a,{className:l.detailTitle,variant:"subtitle1"},t),r.a.createElement(D.a,{className:l.multiSelect,placeholder:"Any",id:c,isMulti:!0,closeMenuOnSelect:!0,defaultValue:null,onChange:a.bind(void 0,c),options:n}))}),r.a.createElement(j.a,{className:l.header,variant:"body1"},"and reside in one of the following countries"),r.a.createElement(D.a,{className:l.multiSelect,placeholder:"Any",id:"country-select",isMulti:!0,closeMenuOnSelect:!1,defaultValue:null,onChange:n,options:i})))},V=a(36),W=a(142),R=a(143),q=/(col_\w+)/,U=[{key:"focus_area",title:"Focus Area",options:[],nameMap:{},tableName:"focus%20area",fieldName:"Focus Area"},{key:"core_skills",title:"Core Skills",options:[],nameMap:{},tableName:"skills",fieldName:"Core Skill"},{key:"projects",title:"Projects",options:[],nameMap:{},tableName:"projects",fieldName:"Project Name"}],J=[],X=u.a.reduce(U,function(e,t){return e[t.key]=[],e},{}),Y=function(e){e.forEach(function(e){u.a.each(U,function(t){var a=t.key,n=t.options,o=e[a]||[];n.push.apply(n,Object(c.a)(o))})}),U.forEach(function(e,t){var a=e.options,n=e.nameMap;U[t].options=u.a.chain(a).uniq().map(function(e){return{label:n[e],value:e}}).sort(function(e,t){return e.label.toLowerCase()>t.label.toLowerCase()}).value()}),J=u.a.chain(e).map("country").uniq().sort(function(e,t){return e.toLowerCase()>t.toLowerCase()}).map(function(e){return{label:e,value:e}}).value()},Z=Object(k.a)(function(e){return{app:{},filterButton:{position:"absolute",top:e.spacing(1),right:e.spacing(1),"&.filterActive svg":{fill:"#ff8f00"}}}});function $(){var e=Object(o.useState)({}),t=Object(n.a)(e,2),a=t[0],i=t[1],l=Object(o.useState)([]),s=Object(n.a)(l,2),d=s[0],f=s[1],b=Object(o.useState)(""),m=Object(n.a)(b,2),g=m[0],h=m[1],v=Object(o.useState)(X),E=Object(n.a)(v,2),y=E[0],O=E[1],k=Object(o.useState)([]),M=Object(n.a)(k,2),j=M[0],N=M[1],w=j.length||u.a.some(y,function(e){return!!e.length}),T=Object(o.useState)(null),A=Object(n.a)(T,2),L=A[0],_=A[1],z=Object(o.useState)(!1),I=Object(n.a)(z,2),D=I[0],H=I[1],G=function(){return H(!D)},$=Object(V.a)(),K=Object(W.a)($.breakpoints.up("sm"),{noSsr:!0});Object(o.useEffect)(function(){Promise.all(U.map(function(e){var t=e.title,a=e.nameMap,n=e.tableName,c=e.fieldName;return fetch(p(n)).then(function(e){return e.json()}).then(function(e){console.log("FETCH ",t),e.records.forEach(function(e){return a[e.id]=e.fields[c]})}).catch(function(e){console.error(e)})})).then(function(){console.log("FETCH MEMBER DATA"),fetch(p("members")).then(function(e){return e.json()}).then(function(e){var t={},a=e.records.filter(function(e){return e.fields.Latitude&&e.fields.Longitude}).sort(function(e,t){return t.fields.Latitude-e.fields.Latitude}).map(function(e,a){var n={index:a};t[a]=!0,Object.keys(e.fields).forEach(function(t){var a=e.fields[t],c=t.match(q);if(c&&c[0]){var o=c[0];n[o]=a}else{var r=t.toLowerCase().replaceAll("-"," ").replaceAll(/\s+/g,"_");n[r]=a}});var o=u.a.get(n,"project_lead",[]),r=u.a.get(n,"project_consultant",[]);return n.projects=u.a.uniq([].concat(Object(c.a)(o),Object(c.a)(r))),n});Y(a),f(a),K&&H(!0)}).catch(function(e){console.error(e)})})},[]);var Q=u.a.debounce(function(){var e=j.length,t=d.reduce(function(t,a){return u.a.every(y,function(t,n){return!(e&&!j.includes(a.country))&&t.every(function(e){var t=e.value;return a[n]&&a[n].includes(t)})})&&(t[a.index]=!0),t},{});console.log("visibleMap: ",t),i(t)},500);Object(o.useEffect)(Q,[y,j,d]);var ee=Z(),te=Object(C.a)(ee.filterButton,{filterActive:w});return r.a.createElement("div",{classes:ee.app},r.a.createElement(F.a,{onClick:G,className:te},r.a.createElement(R.a,null)),r.a.createElement(P,{multiSelectConfig:U,selectedOptionsMap:y,handleSelectOptions:function(e,t){var a=u.a.cloneDeep(y);u.a.set(a,e,t),O(a)},handleSelectCountries:function(e){N(u.a.map(e,"value"))},panelOpen:D,togglePanelOpen:G,countries:J}),r.a.createElement(B,{selectedMember:L,unselectMemberHandler:function(){return _(null)},selectedOptionsMap:y,MULTI_SELECT_CONFIG:U}),r.a.createElement(x.a,null,g),r.a.createElement(S,{allMembers:d,selectedCountries:j,visibleMemberMap:a,setSelectedMember:_,setTooltipContent:h}))}var K=document.getElementById("root");l.a.render(r.a.createElement($,null),K)},80:function(e,t,a){e.exports=a(108)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.e2a4a6a5.chunk.js.map