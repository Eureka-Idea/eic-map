{"version":3,"sources":["consts.js","MapChart.js","MemberDetails.js","FilterPanel.js","index.js"],"names":["getApiLink","tableName","concat","MODE_DATA","headerText","colors","primary","secondary","outline","degToRad","d","Math","PI","getRandom","spread","random","ROTATION_DEFAULT","ROTATION_MAGNITUDE","RANDOMN_ROTATIONAL_SPREAD","getTransform","rotationMultiple","pinRotation","transX","sin","cos","transY","degRotation","PIN_COLORS","_","uniq","useStyles","makeStyles","theme","dismissed","dragHint","background","position","& .MuiTypography-body1","top","spacing","left","padding","boxShadow","shadows","textAlign","&$dismissed","transition","root","zIndex","height","width","& svg > g > rect","fill","& *","MapChart","_ref","allMembers","selectedCountries","visibleMemberMap","setTooltipContent","setSelectedMember","console","log","_MODE_DATA$consultant","MarkerMap","useMemo","reduce","accum","m","i","name","latitude","longitude","_m$col_rotation","col_rotation","index","react_default","a","createElement","index_umd","key","coordinates","onClick","bind","onMouseEnter","e","onMouseLeave","transform","ry","x","PIN_WIDTH","y","PIN_HEIGHT","className","strokeWidth","strokeOpacity","cx","cy","r","stroke","length","fillOpacity","visibleMarkers","chain","map","bool","sort","b","Number","value","classes","_useState","useState","_useState2","Object","slicedToArray","dragHintDismissed","setDragHintDismissed","dismissDragHint","Paper","clsx","defineProperty","Typography","variant","data-tip","onMouseOver","setTimeout","onWheel","onDragStart","id","fx","fy","offset","stopOpacity","stopColor","x1","y1","x2","y2","zoom","center","geography","_ref2","geographies","geo","includes","properties","NAME","rsmKey","modal","display","alignItems","justifyContent","paper","maxWidth","maxHeight","overflowY","backgroundColor","border","margin","introDetails","minWidth","bodyDetails","paddingBottom","fontSize","fontVariant","letterSpacing","verticalAlign","borderBottom","marginBottom","detailTitle","lineHeight","fontFamily","textTransform","paddingTop","detailValue","selectedAttribute","fontWeight","profileLink","color","headshot","marginLeft","title","MemberDetails","selectedMember","unselectMemberHandler","selectedOptionsMap","MULTI_SELECT_CONFIG","get","body","_ref3","link","Fragment","_ref4","nameMap","attributes","processedAttributes","attr","label","selected","some","o","toLowerCase","idx","classNames","getAttributes","Link","href","rel","target","Modal","open","onClose","aria-labelledby","aria-describedby","BackdropComponent","Backdrop","BackdropProps","timeout","_paper","breakpoints","up","& $content","content","boxSizing","header","paddingRight","multiSelect","toggleButton","right","FilterPanel","multiSelectConfig","handleSelectOptions","handleSelectCountries","togglePanelOpen","panelOpen","countries","Drawer","anchor","ButtonGroup","IconButton","Close","options","selectWrapper","react_select_esm","placeholder","isMulti","closeMenuOnSelect","defaultValue","onChange","regexpNickname","fieldName","COUNTRIES","multiStateMap","next","setMultiSelectValues","members","forEach","member","each","values","push","apply","toConsumableArray","c","app","filterButton","&.filterActive svg","App","setVisibleMemberMap","_useState3","_useState4","setAllMembers","_useState5","_useState6","tooltipContent","_useState7","_useState8","setSelectedOptionsMap","_useState9","_useState10","setSelectedCountries","filterActive","_useState11","_useState12","_useState13","_useState14","setPanelOpen","useTheme","bigEnough","useMediaQuery","noSsr","useEffect","Promise","all","fetch","then","response","json","data","records","fields","catch","error","allMemberMap","filter","Latitude","Longitude","m1","m2","memObj","keys","field","val","nicknameMatch","match","nickname","standardizedField","replaceAll","leads","consults","projects","debouncedSetVisible","debounce","countriesSelected","visibleMap","visMap","every","selectedValues","country","filtersIconClasses","FilterList","src_FilterPanel","newState","cloneDeep","set","src_MemberDetails","index_es","src_MapChart","rootElement","document","getElementById","ReactDOM","render"],"mappings":"6LAOaA,EAAa,SAACC,GACzB,uDAAAC,OAAwDD,EAAxD,aAAAC,OAFU,sBAKCC,EACE,CACXC,WAAY,kBACZC,OAAQ,CACNC,QAAS,UAITC,UAAW,UAIXC,QAAS,cA2BTC,EAAW,SAACC,GAAD,OAAQA,EAAIC,KAAKC,GAAM,KAElCC,EAAY,SAACC,GAAD,OAAYA,GAAUH,KAAKI,SAAW,KAG3CC,EAAmBP,EAAS,IAE5BQ,EAAsB,EAAIN,KAAKC,GAAM,EAErCM,EAA4BT,EAAS,IAGrCU,EAAe,SAACC,GAC3B,IAAIC,EAAcL,EAElBK,GAAeR,EAAUK,GACzBG,GAAeD,EAAmBH,EAElC,IAAMK,EAGJT,EAAU,GAXqB,KAbT,GAyBtBF,KAAKY,IAAIF,GA1BY,EA2BpBV,KAAKa,IAAIH,GAA4B,EAClCI,EAEJZ,EAAU,GAhBqB,KAbT,GA8BtBF,KAAKa,IAAIH,GA/BY,EAgCpBV,KAAKY,IAAIF,GAA4B,EAElCK,EA7BqB,IA6BEL,EA7BKV,KAAKC,GA+BvC,MADW,aAAAV,OAAgBoB,EAAhB,MAAApB,OAA2BuB,EAA3B,aAAAvB,OAA6CwB,EAA7C,MAyLAC,EAAaC,IAAEC,KAAK,CAC/B,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,8CCtfIC,EAAYC,YAAW,SAACC,GAAD,MAAY,CACvCC,UAAW,GACXC,SAAU,CACRC,WAAY,UACZC,SAAU,WACVC,yBAA0B,GAI1BC,IAAKN,EAAMO,QAAQ,GACnBC,KAAMR,EAAMO,QAAQ,GACpBE,QAAST,EAAMO,QAAQ,GACvBG,UAAWV,EAAMW,QAAQ,GACzBC,UAAW,SACXC,cAAe,CACbL,MAAO,IACPM,WAAY,gBAGhBC,KAAM,CACJC,QAAS,EACTZ,SAAU,WACVa,OAAQ,QACRC,MAAO,QAEPC,mBAAoB,CAClBC,KAAM,WAIRC,MAAO,CACL7C,QAAS,YAgMA8C,EA3LE,SAAAC,GAMX,IALJC,EAKID,EALJC,WACAC,EAIIF,EAJJE,kBACAC,EAGIH,EAHJG,iBACAC,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","file":"static/js/main.e2a4a6a5.chunk.js","sourcesContent":["import _ from \"lodash\"\n\nexport const GEO_URL =\n\"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\"\n\n// read-only key, only exposes public data\nconst KEY = \"keyFRBqnIvAd1gkXG\"\nexport const getApiLink = (tableName) => {\n  return `https://api.airtable.com/v0/appfS3glFVXDszRVn/${tableName}?api_key=${KEY}`\n}\n\nexport const MODE_DATA = {\n  consultants: {\n    headerText: \"EIC Consultants\",\n    colors: {\n      primary: \"#edeac9\",\n      // primary: \"#d7d3a0\",\n      // primary: \"#b89fd3ee\", EIC purple\n      // primary: \"#1b63c188\",\n      secondary: \"#f5f4dc\",\n      // secondary: \"#f4f2d1\",\n      // secondary: \"#b89fd3aa\", EIC purple\n      // secondary: \"#5a87c144\",\n      outline: \"#6d2e00bd\",\n      // primary: \"#1b63c1e3\",\n      // secondary: \"#5a87c126\",\n    },\n  },\n  projects: {\n    headerText: \"EIC Projects\",\n    colors: {\n      primary: \"#149E6Ae3\",\n      secondary: \"#58998026\",\n      outline: \"#00000055\",\n    },\n  },\n}\n\nexport const PIN_FILL_OPACITY = 1\nexport const PIN_GRAD_OPACITY = 0.3\nexport const PIN_STROKE_OPACITY = 1\nexport const PIN_STROKE = \"#555\"\nexport const PIN_SHAFT_WIDTH = 1.2\nexport const PIN_HEAD_STROKE_WIDTH = 0\n// export const PIN_SHAFT_STROKE_WIDTH = 0.2;\n\nexport const PIN_WIDTH = 7\nexport const PIN_HEIGHT = 10\nexport const PIN_HEAD_SCALE = 1\n\nconst degToRad = (d) => (d * Math.PI) / 180\nconst radToDeg = (r) => (r * 180) / Math.PI\nconst getRandom = (spread) => spread * (Math.random() - 0.5)\n\n// default tilt\nexport const ROTATION_DEFAULT = degToRad(13)\n// radians assigned per unit of col_rotation assigned in sheet\nexport const ROTATION_MAGNITUDE = (2 * Math.PI) / 7\n// range of added randomness\nexport const RANDOMN_ROTATIONAL_SPREAD = degToRad(10)\nexport const RANDOM_SHIFT_FACTOR = 0.05\n\nexport const getTransform = (rotationMultiple) => {\n  let pinRotation = ROTATION_DEFAULT\n  // slight random rotational variance for realism\n  pinRotation += getRandom(RANDOMN_ROTATIONAL_SPREAD)\n  pinRotation += rotationMultiple * ROTATION_MAGNITUDE\n\n  const transX =\n    // slight random offset for realism\n    // ((PIN_WIDTH + PIN_HEIGHT) * RANDOM_SHIFT_FACTOR * rotationMultiple) +\n    getRandom((PIN_WIDTH + PIN_HEIGHT) * RANDOM_SHIFT_FACTOR) +\n    Math.sin(pinRotation) * PIN_HEIGHT -\n    (Math.cos(pinRotation) * PIN_WIDTH) / 2\n  const transY =\n    // slight random offset for realism\n    getRandom((PIN_WIDTH + PIN_HEIGHT) * RANDOM_SHIFT_FACTOR) -\n    Math.cos(pinRotation) * PIN_HEIGHT -\n    (Math.sin(pinRotation) * PIN_WIDTH) / 2\n\n  const degRotation = radToDeg(pinRotation)\n  const trans = `translate(${transX}, ${transY}) rotate(${degRotation})`\n  return trans\n}\n\n// export const COUNTRIES = [\n//   \"Afghanistan\",\n//   \"Angola\",\n//   \"Albania\",\n//   \"United Arab Emirates\",\n//   \"Argentina\",\n//   \"Armenia\",\n//   \"Antarctica\",\n//   \"Fr. S. Antarctic Lands\",\n//   \"Australia\",\n//   \"Austria\",\n//   \"Azerbaijan\",\n//   \"Burundi\",\n//   \"Belgium\",\n//   \"Benin\",\n//   \"Burkina Faso\",\n//   \"Bangladesh\",\n//   \"Bulgaria\",\n//   \"Bahamas\",\n//   \"Bosnia and Herz.\",\n//   \"Belarus\",\n//   \"Belize\",\n//   \"Bolivia\",\n//   \"Brazil\",\n//   \"Brunei\",\n//   \"Bhutan\",\n//   \"Botswana\",\n//   \"Central African Rep.\",\n//   \"Canada\",\n//   \"Switzerland\",\n//   \"Chile\",\n//   \"China\",\n//   \"C\",\n//   \"Cameroon\",\n//   \"Dem. Rep. Congo\",\n//   \"Congo\",\n//   \"Colombia\",\n//   \"Costa Rica\",\n//   \"Cuba\",\n//   \"N. Cyprus\",\n//   \"Cyprus\",\n//   \"Czechia\",\n//   \"Germany\",\n//   \"Djibouti\",\n//   \"Denmark\",\n//   \"Dominican Rep.\",\n//   \"Algeria\",\n//   \"Ecuador\",\n//   \"Egypt\",\n//   \"Eritrea\",\n//   \"Spain\",\n//   \"Estonia\",\n//   \"Ethiopia\",\n//   \"Finland\",\n//   \"Fiji\",\n//   \"Falkland Is.\",\n//   \"France\",\n//   \"Gabon\",\n//   \"United Kingdom\",\n//   \"Georgia\",\n//   \"Ghana\",\n//   \"Guinea\",\n//   \"Gambia\",\n//   \"Guinea-Bissau\",\n//   \"Eq. Guinea\",\n//   \"Greece\",\n//   \"Greenland\",\n//   \"Guatemala\",\n//   \"Guyana\",\n//   \"Honduras\",\n//   \"Croatia\",\n//   \"Haiti\",\n//   \"Hungary\",\n//   \"Indonesia\",\n//   \"India\",\n//   \"Ireland\",\n//   \"Iran\",\n//   \"Iraq\",\n//   \"Iceland\",\n//   \"Israel\",\n//   \"Italy\",\n//   \"Jamaica\",\n//   \"Jordan\",\n//   \"Japan\",\n//   \"Kazakhstan\",\n//   \"Kenya\",\n//   \"Kyrgyzstan\",\n//   \"Cambodia\",\n//   \"South Korea\",\n//   \"Kosovo\",\n//   \"Kuwait\",\n//   \"Laos\",\n//   \"Lebanon\",\n//   \"Liberia\",\n//   \"Libya\",\n//   \"Sri Lanka\",\n//   \"Lesotho\",\n//   \"Lithuania\",\n//   \"Luxembourg\",\n//   \"Latvia\",\n//   \"Morocco\",\n//   \"Moldova\",\n//   \"Madagascar\",\n//   \"Mexico\",\n//   \"Macedonia\",\n//   \"Mali\",\n//   \"Myanmar\",\n//   \"Montenegro\",\n//   \"Mongolia\",\n//   \"Mozambique\",\n//   \"Mauritania\",\n//   \"Malawi\",\n//   \"Malaysia\",\n//   \"Namibia\",\n//   \"New Caledonia\",\n//   \"Niger\",\n//   \"Nigeria\",\n//   \"Nicaragua\",\n//   \"Netherlands\",\n//   \"Norway\",\n//   \"Nepal\",\n//   \"New Zealand\",\n//   \"Oman\",\n//   \"Pakistan\",\n//   \"Panama\",\n//   \"Peru\",\n//   \"Philippines\",\n//   \"Papua New Guinea\",\n//   \"Poland\",\n//   \"Puerto Rico\",\n//   \"North Korea\",\n//   \"Portugal\",\n//   \"Paraguay\",\n//   \"Palestine\",\n//   \"Qatar\",\n//   \"Romania\",\n//   \"Russia\",\n//   \"Rwanda\",\n//   \"W. Sahara\",\n//   \"Saudi Arabia\",\n//   \"Sudan\",\n//   \"S. Sudan\",\n//   \"Senegal\",\n//   \"Solomon Is.\",\n//   \"Sierra Leone\",\n//   \"El Salvador\",\n//   \"Somaliland\",\n//   \"Somalia\",\n//   \"Serbia\",\n//   \"Singapore\",\n//   \"Suriname\",\n//   \"Slovakia\",\n//   \"Slovenia\",\n//   \"Sweden\",\n//   \"Swaziland\",\n//   \"Syria\",\n//   \"Chad\",\n//   \"Togo\",\n//   \"Thailand\",\n//   \"Tajikistan\",\n//   \"Turkmenistan\",\n//   \"Timor-Leste\",\n//   \"Trinidad and Tobago\",\n//   \"Tunisia\",\n//   \"Turkey\",\n//   \"Taiwan\",\n//   \"Tanzania\",\n//   \"Uganda\",\n//   \"Ukraine\",\n//   \"Uruguay\",\n//   \"United States of America\",\n//   \"Uzbekistan\",\n//   \"Venezuela\",\n//   \"Vietnam\",\n//   \"Vanuatu\",\n//   \"Yemen\",\n//   \"South Africa\",\n//   \"Zambia\",\n//   \"Zimbabwe\",\n// ]\n\nexport const PIN_COLORS = _.uniq([\n  \"#63b598\",\n  \"#ce7d78\",\n  \"#ea9e70\",\n  \"#a48a9e\",\n  \"#c6e1e8\",\n  \"#648177\",\n  \"#0d5ac1\",\n  \"#f205e6\",\n  \"#1c0365\",\n  \"#14a9ad\",\n  \"#4ca2f9\",\n  \"#a4e43f\",\n  \"#d298e2\",\n  \"#6119d0\",\n  \"#d2737d\",\n  \"#c0a43c\",\n  \"#f2510e\",\n  \"#79806e\",\n  \"#cd2f00\",\n  \"#9348af\",\n  \"#01ac53\",\n  \"#c5a4fb\",\n  \"#996635\",\n  \"#b11573\",\n  \"#75d89e\",\n  \"#2f3f94\",\n  \"#2f7b99\",\n  \"#da967d\",\n  \"#34891f\",\n  \"#b0d87b\",\n  \"#ca4751\",\n  \"#7e50a8\",\n  \"#c4d647\",\n  \"#e0eeb8\",\n  \"#11dec1\",\n  \"#566ca0\",\n  \"#ffdbe1\",\n  \"#935b6d\",\n  \"#916988\",\n  \"#aead3a\",\n  \"#9e6d71\",\n  \"#4b5bdc\",\n  \"#0cd36d\",\n  \"#250662\",\n  \"#cb5bea\",\n  \"#ac3e1b\",\n  \"#df514a\",\n  \"#539397\",\n  \"#880977\",\n  \"#f697c1\",\n  \"#ba96ce\",\n  \"#679c9d\",\n  \"#c6c42c\",\n  \"#5d2c52\",\n  \"#48b41b\",\n  \"#e1cf3b\",\n  \"#5be4f0\",\n  \"#57c4d8\",\n  \"#a4d17a\",\n  \"#be608b\",\n  \"#96b00c\",\n  \"#088baf\",\n  \"#f158bf\",\n  \"#e145ba\",\n  \"#ee91e3\",\n  \"#05d371\",\n  \"#5426e0\",\n  \"#4834d0\",\n  \"#802234\",\n  \"#6749e8\",\n  \"#0971f0\",\n  \"#8fb413\",\n  \"#b2b4f0\",\n  \"#c3c89d\",\n  \"#c9a941\",\n  \"#41d158\",\n  \"#fb21a3\",\n  \"#51aed9\",\n  \"#5bb32d\",\n  \"#21538e\",\n  \"#89d534\",\n  \"#d36647\",\n  \"#7fb411\",\n  \"#0023b8\",\n  \"#3b8c2a\",\n  \"#986b53\",\n  \"#f50422\",\n  \"#983f7a\",\n  \"#ea24a3\",\n  \"#79352c\",\n  \"#521250\",\n  \"#c79ed2\",\n  \"#d6dd92\",\n  \"#e33e52\",\n  \"#b2be57\",\n  \"#fa06ec\",\n  \"#1bb699\",\n  \"#6b2e5f\",\n  \"#64820f\",\n  \"#21538e\",\n  \"#89d534\",\n  \"#d36647\",\n  \"#7fb411\",\n  \"#0023b8\",\n  \"#3b8c2a\",\n  \"#986b53\",\n  \"#f50422\",\n  \"#983f7a\",\n  \"#ea24a3\",\n  \"#79352c\",\n  \"#521250\",\n  \"#c79ed2\",\n  \"#d6dd92\",\n  \"#e33e52\",\n  \"#b2be57\",\n  \"#fa06ec\",\n  \"#1bb699\",\n  \"#6b2e5f\",\n  \"#64820f\",\n  \"#9cb64a\",\n  \"#996c48\",\n  \"#9ab9b7\",\n  \"#06e052\",\n  \"#e3a481\",\n  \"#0eb621\",\n  \"#fc458e\",\n  \"#b2db15\",\n  \"#aa226d\",\n  \"#792ed8\",\n  \"#73872a\",\n  \"#520d3a\",\n  \"#cefcb8\",\n  \"#a5b3d9\",\n  \"#7d1d85\",\n  \"#c4fd57\",\n  \"#f1ae16\",\n  \"#8fe22a\",\n  \"#ef6e3c\",\n  \"#243eeb\",\n  \"#dd93fd\",\n  \"#3f8473\",\n  \"#e7dbce\",\n  \"#421f79\",\n  \"#7a3d93\",\n  \"#635f6d\",\n  \"#93f2d7\",\n  \"#9b5c2a\",\n  \"#15b9ee\",\n  \"#0f5997\",\n  \"#409188\",\n  \"#911e20\",\n  \"#1350ce\",\n  \"#10e5b1\",\n  \"#fff4d7\",\n  \"#cb2582\",\n  \"#ce00be\",\n  \"#32d5d6\",\n  \"#608572\",\n  \"#c79bc2\",\n  \"#00f87c\",\n  \"#77772a\",\n  \"#6995ba\",\n  \"#fc6b57\",\n  \"#f07815\",\n  \"#8fd883\",\n  \"#060e27\",\n  \"#96e591\",\n  \"#21d52e\",\n  \"#d00043\",\n  \"#b47162\",\n  \"#1ec227\",\n  \"#4f0f6f\",\n  \"#1d1d58\",\n  \"#947002\",\n  \"#bde052\",\n  \"#e08c56\",\n  \"#28fcfd\",\n  \"#36486a\",\n  \"#d02e29\",\n  \"#1ae6db\",\n  \"#3e464c\",\n  \"#a84a8f\",\n  \"#911e7e\",\n  \"#3f16d9\",\n  \"#0f525f\",\n  \"#ac7c0a\",\n  \"#b4c086\",\n  \"#c9d730\",\n  \"#30cc49\",\n  \"#3d6751\",\n  \"#fb4c03\",\n  \"#640fc1\",\n  \"#62c03e\",\n  \"#d3493a\",\n  \"#88aa0b\",\n  \"#406df9\",\n  \"#615af0\",\n  \"#2a3434\",\n  \"#4a543f\",\n  \"#79bca0\",\n  \"#a8b8d4\",\n  \"#00efd4\",\n  \"#7ad236\",\n  \"#7260d8\",\n  \"#1deaa7\",\n  \"#06f43a\",\n  \"#823c59\",\n  \"#e3d94c\",\n  \"#dc1c06\",\n  \"#f53b2a\",\n  \"#b46238\",\n  \"#2dfff6\",\n  \"#a82b89\",\n  \"#1a8011\",\n  \"#436a9f\",\n  \"#1a806a\",\n  \"#4cf09d\",\n  \"#c188a2\",\n  \"#67eb4b\",\n  \"#b308d3\",\n  \"#fc7e41\",\n  \"#af3101\",\n  \"#71b1f4\",\n  \"#a2f8a5\",\n  \"#e23dd0\",\n  \"#d3486d\",\n  \"#00f7f9\",\n  \"#474893\",\n  \"#3cec35\",\n  \"#1c65cb\",\n  \"#5d1d0c\",\n  \"#2d7d2a\",\n  \"#ff3420\",\n  \"#5cdd87\",\n  \"#a259a4\",\n  \"#e4ac44\",\n  \"#1bede6\",\n  \"#8798a4\",\n  \"#d7790f\",\n  \"#b2c24f\",\n  \"#de73c2\",\n  \"#d70a9c\",\n  \"#88e9b8\",\n  \"#c2b0e2\",\n  \"#86e98f\",\n  \"#ae90e2\",\n  \"#1a806b\",\n  \"#436a9e\",\n  \"#0ec0ff\",\n  \"#f812b3\",\n  \"#b17fc9\",\n  \"#8d6c2f\",\n  \"#d3277a\",\n  \"#2ca1ae\",\n  \"#9685eb\",\n  \"#8a96c6\",\n  \"#dba2e6\",\n  \"#76fc1b\",\n  \"#608fa4\",\n  \"#20f6ba\",\n  \"#07d7f6\",\n  \"#dce77a\",\n  \"#77ecca\",\n])\n","import React, { useMemo, useState } from \"react\"\nimport {\n  ComposableMap,\n  Geographies,\n  Geography,\n  ZoomableGroup,\n  Marker,\n} from \"react-simple-maps\"\nimport {\n  GEO_URL,\n  MODE_DATA,\n  PIN_COLORS,\n  PIN_FILL_OPACITY,\n  PIN_STROKE,\n  PIN_STROKE_OPACITY,\n  PIN_GRAD_OPACITY,\n  PIN_HEAD_STROKE_WIDTH,\n  PIN_SHAFT_WIDTH,\n  PIN_WIDTH,\n  PIN_HEIGHT,\n  PIN_HEAD_SCALE,\n  getTransform,\n} from \"./consts\"\nimport _ from \"lodash\"\nimport { makeStyles, Paper, Typography } from \"@material-ui/core\"\nimport clsx from \"clsx\"\n\nconst useStyles = makeStyles((theme) => ({\n  dismissed: {},\n  dragHint: {\n    background: \"#f5f3ec\",\n    position: \"absolute\",\n    \"& .MuiTypography-body1\": {\n      // fontSize: \".75rem\",\n      // lineHeight: 1.25,\n    },\n    top: theme.spacing(4),\n    left: theme.spacing(4),\n    padding: theme.spacing(2),\n    boxShadow: theme.shadows[3],\n    textAlign: \"center\",\n    \"&$dismissed\": {\n      left: -400,\n      transition: \"left 1000ms\",\n    },\n  },\n  root: {\n    zIndex: -1,\n    position: \"absolute\",\n    height: \"100vh\",\n    width: \"100vw\",\n    // color the ocean (better way?)\n    \"& svg > g > rect\": {\n      fill: \"#eef3f9\",\n      // fill: \"#5a87c11a\",\n    },\n    // prevents svg, path, g elements from getting blue selected rectangle\n    \"& *\": {\n      outline: \"none\",\n    },\n  },\n}))\n\nconst MapChart = ({\n  allMembers,\n  selectedCountries,\n  visibleMemberMap,\n  setTooltipContent,\n  setSelectedMember,\n}) => {\n  console.log(\"allMembers: \", allMembers)\n\n  const { headerText, colors } = MODE_DATA[\"consultants\"]\n\n  const MarkerMap = useMemo(\n    () =>\n      allMembers\n        // .filter((m) => m.latitude && m.longitude)\n        .reduce((accum, m, i) => {\n          const { name, latitude, longitude, col_rotation = 0 } = m\n          if (!i) console.log(\"RUNNING MEMOIZED MEMBER CREATION\")\n          accum[m.index] = (\n            <Marker\n              key={name}\n              coordinates={[longitude, latitude]}\n              onClick={setSelectedMember.bind(null, m)}\n              onMouseEnter={(e) => {\n                setTooltipContent(name)\n              }}\n              onMouseLeave={() => {\n                setTooltipContent(\"\")\n              }}\n            >\n              <g transform={getTransform(col_rotation)}>\n                <rect\n                  ry=\".5\"\n                  x={PIN_WIDTH / 2 - PIN_SHAFT_WIDTH / 2}\n                  y={PIN_WIDTH / 2}\n                  width={PIN_SHAFT_WIDTH}\n                  height={PIN_HEIGHT - PIN_WIDTH / 2}\n                  fill=\"url(#shaft-reflection)\"\n                  className=\"pin-shaft\"\n                  strokeWidth=\"0\"\n                  strokeOpacity=\"0\"\n                />\n                {/* <line\n                x1={PIN_WIDTH / 2}\n                y1={PIN_WIDTH / 2}\n                x2={PIN_WIDTH / 2}\n                y2={PIN_HEIGHT}\n                className=\"pin-shaft\"\n                stroke={PIN_STROKE}\n                strokeWidth={PIN_SHAFT_STROKE_WIDTH}\n                strokeOpacity={PIN_STROKE_OPACITY}\n                strokeLinecap=\"round\"\n              /> */}\n                <circle\n                  cx={PIN_WIDTH / 2}\n                  cy={PIN_WIDTH / 2}\n                  r={(PIN_WIDTH / 2) * PIN_HEAD_SCALE}\n                  className=\"pin-head\"\n                  stroke={PIN_STROKE}\n                  strokeOpacity={PIN_STROKE_OPACITY}\n                  strokeWidth={PIN_HEAD_STROKE_WIDTH}\n                  fill={PIN_COLORS[i % (PIN_COLORS.length - 1)]}\n                  fillOpacity={PIN_FILL_OPACITY}\n                />\n                <circle\n                  cx={PIN_WIDTH / 2}\n                  cy={PIN_WIDTH / 2}\n                  r={(PIN_WIDTH / 2) * PIN_HEAD_SCALE}\n                  className=\"pin-head-grad\"\n                  stroke=\"transparent\"\n                  fill=\"url(#head-reflection)\"\n                  fillOpacity={PIN_GRAD_OPACITY}\n                />\n              </g>\n              {/* reference point: */}\n              {/* <circle cx=\"0\" cy=\"0\" r=\".4\"></circle> */}\n            </Marker>\n          )\n          return accum\n        }, {}),\n    [allMembers, setTooltipContent]\n  )\n\n  const visibleMarkers = _.chain(visibleMemberMap)\n    .map((bool, index) => index)\n    .sort((a, b) => Number(a) - Number(b))\n    .map((index) => MarkerMap[index])\n    .value()\n\n  const classes = useStyles()\n\n  const [dragHintDismissed, setDragHintDismissed] = useState(false)\n  const dismissDragHint = () => setDragHintDismissed(true)\n  // auto dismiss after 20 seconds\n  const setDismissTimer = () => setTimeout(dismissDragHint, 20 * 1000)\n\n  return (\n    <div className={classes.root}>\n      <Paper\n        className={clsx(classes.dragHint, {\n          [classes.dismissed]: dragHintDismissed,\n        })}\n      >\n        <Typography variant=\"body1\">Drag map to move</Typography>\n        <Typography variant=\"body1\">Scroll to zoom</Typography>\n      </Paper>\n      <ComposableMap\n        data-tip=\"\"\n        onMouseOver={setDismissTimer}\n        onClick={dismissDragHint}\n        onWheel={dismissDragHint}\n        onDragStart={dismissDragHint}\n      >\n        <defs>\n          <radialGradient\n            id=\"head-reflection\"\n            cx=\"46%\"\n            cy=\"60%\"\n            r=\"50%\"\n            fx=\"46%\"\n            fy=\"60%\"\n          >\n            <stop offset=\"0%\" stopOpacity=\"0\" stopColor=\"#fff\" />\n            <stop offset=\"100%\" stopOpacity=\"1\" stopColor=\"#000\" />\n          </radialGradient>\n          <linearGradient\n            id=\"shaft-reflection\"\n            x1=\"0%\"\n            y1=\"0%\"\n            x2=\"100%\"\n            y2=\"0%\"\n          >\n            <stop offset=\"0%\" stopOpacity=\"1\" stopColor=\"#777\" />\n            <stop offset=\"46%\" stopOpacity=\"1\" stopColor=\"#fcfcfc\" />\n            <stop offset=\"100%\" stopOpacity=\"1\" stopColor=\"#777\" />\n          </linearGradient>\n        </defs>\n        {/* NOTE second data-tip prevents tooltip location from getting misplaced after click */}\n        <ZoomableGroup data-tip=\"\" zoom={1} center={[19, 0]}>\n          <Geographies geography={GEO_URL}>\n            {({ geographies }) =>\n              geographies.map((geo) => (\n                <Geography\n                  fill={\n                    selectedCountries.includes(geo.properties.NAME)\n                      ? colors.primary\n                      : colors.secondary\n                  }\n                  stroke={colors.outline}\n                  strokeWidth=\".1\"\n                  key={geo.rsmKey}\n                  geography={geo}\n                  onClick={dismissDragHint}\n                  onMouseEnter={(e) => {\n                    // e.target.setAttribute(\"fill\", colors.primary)\n                    setTooltipContent(geo.properties.NAME)\n                  }}\n                  onMouseLeave={(e) => {\n                    // e.target.setAttribute(\"fill\", colors.secondary)/\n                    setTooltipContent(\"\")\n                  }}\n                />\n              ))\n            }\n          </Geographies>\n          {visibleMarkers}\n        </ZoomableGroup>\n      </ComposableMap>\n      {/* <div>\n        {PIN_COLORS.map((color) => {\n          const style = {\n            backgroundColor: color + \"88\",\n            width: 200,\n            height: 30,\n            display: \"inline-block\",\n          };\n          return (\n            <span key={color} style={style}>\n              {color}\n            </span>\n          );\n        })}\n      </div> */}\n    </div>\n  )\n}\n\nexport default MapChart\n","import React from \"react\"\nimport {\n  Backdrop,\n  Link,\n  makeStyles,\n  Modal,\n  Typography,\n} from \"@material-ui/core\"\nimport _ from \"lodash\"\nimport clsx from \"clsx\"\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paper: {\n    position: \"absolute\",\n    maxWidth: 500,\n    maxHeight: \"85vh\",\n    overflowY: \"auto\",\n    backgroundColor: \"#e8f2ff\",\n    // backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(3, 4),\n    margin: theme.spacing(2),\n  },\n  introDetails: {\n    display: \"inline-block\",\n    minWidth: \"220px\",\n    // fontSize: \".75rem\",\n  },\n  bodyDetails: {\n    paddingBottom: theme.spacing(2),\n  },\n  name: {\n    fontSize: \"1.5rem\",\n    fontVariant: \"petite-caps\",\n    letterSpacing: \"0.8px\",\n    verticalAlign: \"top\",\n    textAlign: \"unset\",\n    display: \"inline-block\",\n    borderBottom: \"2px solid #0858c0\",\n    marginBottom: theme.spacing(2),\n  },\n  detailTitle: {\n    fontSize: \".6rem\",\n    letterSpacing: \"1.6px\",\n    lineHeight: 1.5,\n    fontFamily: \"monospace\",\n    textTransform: \"uppercase\",\n    paddingTop: theme.spacing(1),\n  },\n  detailValue: {\n    fontSize: \".75rem\",\n    display: \"inline\",\n  },\n  selectedAttribute: {\n    fontWeight: \"700\",\n  },\n  profileLink: {\n    fontSize: \".75rem\",\n    fontFamily: \"monospace\",\n    display: \"inline-block\",\n    paddingBottom: theme.spacing(3),\n    color: \"#0858c0\",\n  },\n  headshot: {\n    maxWidth: \"75px\",\n    marginLeft: theme.spacing(2),\n    verticalAlign: \"top\",\n  },\n}))\n\nconst introDetails = [\n  { key: \"membership\", title: \"Membership\" },\n  { key: \"consulting_status\", title: \"Consulting Status\" },\n  { key: \"location_&_timezone\", title: \"Location & Timezone\" },\n  { key: \"educational_background\", title: \"Educational Background\" },\n  // { key: \"online_profile_link\", title: \"website\", link: true },\n]\n\n// const bodyDetails = [\n//   { key: \"focus_area\", title: \"Focus Area\" },\n//   { key: \"core_skills\", title: \"Core Skills\" },\n//   { key: \"projects\", title: \"Projects\" },\n// ]\n\nconst MemberDetails = ({\n  selectedMember,\n  unselectMemberHandler,\n  selectedOptionsMap,\n  MULTI_SELECT_CONFIG,\n}) => {\n  // const isMemberSelected = !!selectedMember;\n  const classes = useStyles()\n  if (!selectedMember) return null\n\n  const getAttributes = (key, nameMap) => {\n    const attributes = _.get(selectedMember, key, [])\n    if (!attributes.length) {\n      return (\n        <Typography className={classes.detailValue} variant=\"body1\">\n          N/A\n        </Typography>\n      )\n    }\n\n    const processedAttributes = _.chain(attributes)\n      .map((attr) => ({\n        value: attr,\n        label: _.get(nameMap, attr),\n        selected: _.some(selectedOptionsMap[key], (o) => o.value === attr),\n      }))\n      .sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase())\n      .value()\n\n    return (\n      <>\n        {processedAttributes.map(({ label, selected }, idx) => {\n          const classNames = clsx(classes.detailValue, {\n            [classes.selectedAttribute]: selected,\n          })\n          return (\n            <Typography className={classNames} variant=\"body1\">\n              {label}\n              {idx !== attributes.length - 1 ? \", \" : \"\"}\n            </Typography>\n          )\n        })}\n      </>\n    )\n  }\n\n  const picUrl = _.get(selectedMember, \"profile_pic.0.url\")\n  const profileLink = _.get(selectedMember, \"online_profile_link\")\n  const body = (\n    <div className={classes.paper}>\n      <div className={classes.introDetails}>\n        <Typography className={classes.name} variant=\"h2\">\n          {selectedMember.name}\n        </Typography>\n        {/* {picUrl && <img className={classes.headshot} src={picUrl} />} */}\n        {introDetails.map(({ key, title, link }) => (\n          <>\n            <Typography className={classes.detailTitle} variant=\"subtitle1\">\n              {title}\n            </Typography>\n            <Typography className={classes.detailValue} variant=\"body1\">\n              {_.get(selectedMember, key, \"N/A\")}\n            </Typography>\n          </>\n        ))}\n      </div>\n\n      <div className={classes.bodyDetails}>\n        {MULTI_SELECT_CONFIG.map(({ key, title, nameMap }) => (\n          <div key={key}>\n            <Typography className={classes.detailTitle} variant=\"subtitle1\">\n              {title}\n            </Typography>\n            {getAttributes(key, nameMap)}\n          </div>\n        ))}\n      </div>\n\n      {profileLink && (\n        <Link\n          className={classes.profileLink}\n          href={profileLink}\n          rel=\"noreferrer\"\n          target=\"_blank\"\n        >\n          {profileLink}\n        </Link>\n      )}\n    </div>\n  )\n\n  return (\n    <Modal\n      className={classes.modal}\n      open={true}\n      onClose={unselectMemberHandler}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      {body}\n    </Modal>\n  )\n}\n\nexport default MemberDetails\n","import React from \"react\"\nimport {\n  ButtonGroup,\n  Drawer,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\"\nimport _ from \"lodash\"\nimport Select from \"react-select\"\nimport { Close } from \"@material-ui/icons\"\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: \"100vw\",\n    height: \"75vw\", // map aspect ratio 4:3\n    backgroundColor: \"#e6e3d7\", //#e2dfc9\n    boxShadow: theme.shadows[5],\n    // boxShadow: -3px â€‹0px 8px rgba(0, 0, 0, 0.05),\n    [theme.breakpoints.up(500)]: {\n      width: \"254px\",\n    },\n    [theme.breakpoints.up(\"sm\")]: {\n      width: \"300px\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"360px\",\n      \"& $content\": {\n        padding: theme.spacing(3, 4),\n      },\n    },\n    [theme.breakpoints.up(\"lg\")]: {\n      width: \"420px\",\n    },\n    [theme.breakpoints.up(\"xl\")]: {\n      width: \"480px\",\n    },\n  },\n  content: {\n    overflowY: \"auto\",\n    height: \"100%\",\n    width: \"100%\",\n    padding: theme.spacing(2),\n    boxSizing: \"border-box\",\n  },\n  header: {\n    fontSize: \".75rem\",\n    lineHeight: 1.25,\n    paddingRight: theme.spacing(4), // room for X\n    paddingTop: theme.spacing(1), // room for X\n    paddingBottom: theme.spacing(1),\n  },\n  multiSelect: {\n    fontSize: \".75rem\",\n    paddingBottom: theme.spacing(1),\n  },\n  detailTitle: {\n    fontSize: \".6rem\",\n    letterSpacing: \"1.6px\",\n    lineHeight: 1.5,\n    fontFamily: \"monospace\",\n    textTransform: \"uppercase\",\n    // paddingTop: theme.spacing(1),\n  },\n  toggleButton: {\n    position: \"absolute\",\n    top: theme.spacing(1),\n    right: theme.spacing(1),\n  },\n}))\n\nconst FilterPanel = ({\n  multiSelectConfig,\n  handleSelectOptions,\n  handleSelectCountries,\n  selectedOptionsMap,\n  togglePanelOpen,\n  panelOpen,\n  countries,\n}) => {\n\n  const classes = useStyles()\n  return (\n    <Drawer\n      classes={{ paper: [classes.paper] }}\n      open={panelOpen}\n      variant=\"persistent\"\n      anchor=\"right\"\n    >\n      <ButtonGroup className={classes.toggleButton} onClick={togglePanelOpen}>\n        <IconButton onClick={togglePanelOpen}>\n          <Close />\n        </IconButton>\n      </ButtonGroup>\n      <div className={classes.content}>\n        <Typography className={classes.header} variant=\"body1\">\n          Filter to members who fit <em>all</em> of the following criteria\n        </Typography>\n        {multiSelectConfig.map(({ title, options, key }) => (\n          <div key={key} className={classes.selectWrapper}>\n            <Typography className={classes.detailTitle} variant=\"subtitle1\">\n              {title}\n            </Typography>\n            <Select\n              className={classes.multiSelect}\n              placeholder=\"Any\"\n              id={key}\n              isMulti\n              closeMenuOnSelect={true}\n              defaultValue={null}\n              onChange={handleSelectOptions.bind(this, key)}\n              options={options}\n            />\n          </div>\n        ))}\n        <Typography className={classes.header} variant=\"body1\">\n          and reside in one of the following countries\n        </Typography>\n        <Select\n          className={classes.multiSelect}\n          placeholder=\"Any\"\n          id=\"country-select\"\n          isMulti\n          closeMenuOnSelect={false}\n          defaultValue={null}\n          onChange={handleSelectCountries}\n          options={countries}\n        />\n      </div>\n    </Drawer>\n  )\n}\n\nexport default FilterPanel\n","import React, { useEffect, useState } from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport \"./styles.css\"\n\nimport MapChart from \"./MapChart\"\nimport ReactTooltip from \"react-tooltip\"\nimport MemberDetails from \"./MemberDetails\"\nimport _ from \"lodash\"\nimport FilterPanel from \"./FilterPanel\"\nimport { getApiLink } from \"./consts\"\nimport {\n  Icon,\n  IconButton,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\"\nimport { FilterList } from \"@material-ui/icons\"\nimport clsx from \"clsx\"\n\n// format of col nicknames\nconst regexpNickname = /(col_\\w+)/\n\n// const MULTI_SELECT_VALUE_MAP = {\n//   core_skills_multi: [],\n//   focus_area_multi: [],\n//   projects: [],\n// };\n\nconst MULTI_SELECT_CONFIG = [\n  {\n    key: \"focus_area\",\n    title: \"Focus Area\",\n    options: [],\n    nameMap: {},\n    tableName: \"focus%20area\",\n    fieldName: \"Focus Area\",\n  },\n  {\n    key: \"core_skills\",\n    title: \"Core Skills\",\n    options: [],\n    nameMap: {},\n    tableName: \"skills\",\n    fieldName: \"Core Skill\",\n  },\n  {\n    key: \"projects\",\n    title: \"Projects\",\n    options: [],\n    nameMap: {},\n    tableName: \"projects\",\n    fieldName: \"Project Name\",\n  },\n]\n\nlet COUNTRIES = []\n\nconst multiStateMap = _.reduce(\n  MULTI_SELECT_CONFIG,\n  (accum, next) => {\n    accum[next.key] = []\n    return accum\n  },\n  {}\n)\n\n// based on members' values, generate possible multi select filter options\nconst setMultiSelectValues = (members) => {\n  members.forEach((member) => {\n    _.each(MULTI_SELECT_CONFIG, ({ key, options }) => {\n      const values = member[key] || []\n      options.push(...values)\n    })\n  })\n\n  MULTI_SELECT_CONFIG.forEach(({ options, nameMap }, idx) => {\n    MULTI_SELECT_CONFIG[idx].options = _.chain(options)\n      .uniq()\n      .map((o) => ({ label: nameMap[o], value: o }))\n      .sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase())\n      .value()\n  })\n\n  COUNTRIES = _.chain(members)\n    .map(\"country\")\n    .uniq()\n    .sort((a, b) => a.toLowerCase() > b.toLowerCase())\n    .map((c) => ({ label: c, value: c }))\n    .value()\n}\n\nconst useStyles = makeStyles((theme) => ({\n  app: {},\n  filterButton: {\n    position: \"absolute\",\n    top: theme.spacing(1),\n    right: theme.spacing(1),\n    \"&.filterActive svg\": {\n      fill: \"#ff8f00\",\n    },\n  },\n}))\n\nfunction App() {\n  const [visibleMemberMap, setVisibleMemberMap] = useState({})\n  const [allMembers, setAllMembers] = useState([])\n\n  const [tooltipContent, setTooltipContent] = useState(\"\")\n  const [selectedOptionsMap, setSelectedOptionsMap] = useState(multiStateMap)\n  const [selectedCountries, setSelectedCountries] = useState([])\n  const filterActive =\n    selectedCountries.length ||\n    _.some(selectedOptionsMap, (values) => !!values.length)\n\n  const [selectedMember, setSelectedMember] = useState(null)\n  const unselectMemberHandler = () => setSelectedMember(null)\n\n  const [panelOpen, setPanelOpen] = useState(false)\n  const togglePanelOpen = () => setPanelOpen(!panelOpen)\n\n  const theme = useTheme()\n  const bigEnough = useMediaQuery(theme.breakpoints.up(\"sm\"), { noSsr: true })\n\n  useEffect(() => {\n    // get multi select base data first, so we have nameMaps before setMultiSelectValues\n    Promise.all(\n      MULTI_SELECT_CONFIG.map(({ title, nameMap, tableName, fieldName }) => {\n        return fetch(getApiLink(tableName))\n          .then((response) => response.json())\n          .then((data) => {\n            console.log(\"FETCH \", title)\n            data.records.forEach((r) => (nameMap[r.id] = r.fields[fieldName]))\n          })\n          .catch((error) => {\n            console.error(error)\n          })\n      })\n    ).then(() => {\n      console.log(\"FETCH MEMBER DATA\")\n      fetch(getApiLink(\"members\"))\n        .then((response) => response.json())\n        .then((data) => {\n          const allMemberMap = {}\n          const allMembers = data.records\n            .filter((m) => m.fields.Latitude && m.fields.Longitude) // only located members\n            .sort((m1, m2) => m2.fields.Latitude - m1.fields.Latitude) // so pins overlap correctly\n            .map((r, index) => {\n              const memObj = { index }\n              allMemberMap[index] = true // all members start out visible\n\n              Object.keys(r.fields).forEach((field) => {\n                const val = r.fields[field]\n                const nicknameMatch = field.match(regexpNickname)\n\n                if (nicknameMatch && nicknameMatch[0]) {\n                  const nickname = nicknameMatch[0]\n                  memObj[nickname] = val\n                } else {\n                  const standardizedField = field\n                    .toLowerCase()\n                    .replaceAll(\"-\", \" \")\n                    .replaceAll(/\\s+/g, \"_\")\n                  memObj[standardizedField] = val\n                }\n              })\n\n              const leads = _.get(memObj, \"project_lead\", [])\n              const consults = _.get(memObj, \"project_consultant\", [])\n              memObj.projects = _.uniq([...leads, ...consults])\n              return memObj\n            })\n\n          setMultiSelectValues(allMembers)\n          setAllMembers(allMembers)\n\n          if (bigEnough) setPanelOpen(true)\n        })\n        .catch((error) => {\n          console.error(error)\n        })\n    })\n  }, [])\n\n  const setVisible = () => {\n\n    const countriesSelected = selectedCountries.length\n    \n    const visibleMap = allMembers.reduce((visMap, member) => {\n      const visible = _.every(selectedOptionsMap, (selectedValues, field) => {\n        if (countriesSelected && !selectedCountries.includes(member.country)) {\n          return false\n        }\n        return selectedValues.every(\n          ({ value }) => member[field] && member[field].includes(value)\n        )\n      })\n\n      if (visible) visMap[member.index] = true\n      return visMap\n    }, {})\n\n    console.log(\"visibleMap: \", visibleMap)\n    setVisibleMemberMap(visibleMap)\n  }\n  const debouncedSetVisible = _.debounce(setVisible, 500)\n  \n  // update the visibleMemberMap if filters change\n  useEffect(debouncedSetVisible, [selectedOptionsMap, selectedCountries, allMembers])\n\n  const handleSelectOptions = (key, selected) => {\n    const newState = _.cloneDeep(selectedOptionsMap)\n    _.set(newState, key, selected)\n\n    setSelectedOptionsMap(newState)\n  }\n\n  const handleSelectCountries = (selected) => {\n    setSelectedCountries(_.map(selected, \"value\"))\n  }\n\n  const classes = useStyles()\n  const filtersIconClasses = clsx(classes.filterButton, { filterActive })\n\n  return (\n    <div classes={classes.app}>\n      <IconButton onClick={togglePanelOpen} className={filtersIconClasses}>\n        <FilterList />\n      </IconButton>\n      <FilterPanel\n        multiSelectConfig={MULTI_SELECT_CONFIG}\n        selectedOptionsMap={selectedOptionsMap}\n        handleSelectOptions={handleSelectOptions}\n        handleSelectCountries={handleSelectCountries}\n        panelOpen={panelOpen}\n        togglePanelOpen={togglePanelOpen}\n        countries={COUNTRIES}\n      />\n      <MemberDetails\n        selectedMember={selectedMember}\n        unselectMemberHandler={unselectMemberHandler}\n        selectedOptionsMap={selectedOptionsMap}\n        MULTI_SELECT_CONFIG={MULTI_SELECT_CONFIG}\n      />\n      <ReactTooltip>{tooltipContent}</ReactTooltip>\n      <MapChart\n        allMembers={allMembers}\n        selectedCountries={selectedCountries}\n        visibleMemberMap={visibleMemberMap}\n        setSelectedMember={setSelectedMember}\n        setTooltipContent={setTooltipContent}\n      />\n    </div>\n  )\n}\n\nconst rootElement = document.getElementById(\"root\")\nReactDOM.render(<App />, rootElement)\n"],"sourceRoot":""}